{% comment %}
  This section is used in the product template to render a modern, responsive product page with
  media gallery, content, and add-to-cart form.

  https://shopify.dev/docs/storefronts/themes/architecture/templates/product
{% endcomment %}

{{ 'Details.css' | asset_url | stylesheet_tag: preload: true  }}
<script src="{{ 'script.js' | asset_url }}" defer></script>

<div class="product-page">
  <div class="product-gallery">
    <div class="main-image">
      {% if product.featured_image %}
        {% render 'image', class: 'product-main-image', image: product.featured_image %}
      {% endif %}
    </div>
    {% if product.images.size > 1 %}
      <div class="image-slider">
        <button class="slider-btn prev-btn" id="prevBtn"><</button>
        <div class="slider-container" id="sliderContainer">
          {% for image in product.images %}
            <div class="slider-image {% if forloop.first %}active{% endif %}">
              {% render 'image', class: 'product-slider-image', image: image %}
            </div>
          {% endfor %}
        </div>
        <button class="slider-btn next-btn" id="nextBtn">></button>
      </div>
    {% endif %}
  </div>

  <div class="product-details">
    {% if product.vendor %}
      <p>{{product.vendor}}</p>
    {% endif %}
    
    <h1 class="product-title">{{ product.title }}</h1>
    
<div class="product-prices">
  <p class="product-compare-price">{{ product.selected_or_first_available_variant.compare_at_price }}</p>
  <p class="product-price">{{ product.selected_or_first_available_variant.price }}</p>
</div>


    {% form 'product', product, class: 'product-form' %}
      <input
        type="hidden"
        name="id"
        id="product-id"
        value="{{ product.selected_or_first_available_variant.id }}"
      >
      {% if product.variants.size > 1 %}
      <div class="product-options">
        {% for option in product.options_with_values %}
          <fieldset>
            <legend>{{ option.name }}</legend>
            {% for value in option.values %}
              <div class="variant-value"> 
                <input
                  {% if option.selected_value == value %}checked{% endif %}
                  type="radio"
                  name="{{ option.name }}"
                  value="{{ value }}"
                  id="{{ option.name | handleize  }}-{{ value | handleize  }}"
                />
                <label class="label-value" for="{{ option.name | handleize  }}-{{ value | handleize  }}">
                  {{ value }}
                </label>  
              </div>
            {% endfor %}

          </fieldset>
        {% endfor %}
      </div>
    {% endif %}

      {% comment %} {% if product.variants.size > 1 %}
        {% for option in product.options %}
        <div class="variant-selector">
          <label for="variant-select">:</label>
          <select name="id" id="variant-select">
            {% for variant in product.variants %}
              <option
                value="{{ variant.id }}"
                {% if variant == current_variant %}
                  selected="selected"
                {% endif %}
              >
                {{ variant.title }} - {{ variant.price | money }}
              </option>
            {% endfor %}
          </select>
        </div>
      {% endfor %}
      {% endif %} {% endcomment %}

      <div class="quantity-selector">
        <label for="quantity">Quantity:</label>
        <input type="number" name="quantity" id="quantity" min="1" value="1">
      </div>
      <button type="submit" class="add-to-cart-btn">Add to Cart</button>
      {{ form | payment_button }}
    {% endform %}
    <div class="product-description">{{ product.description }}</div>
  </div>
</div>

<script>
  const product = {{ product | json }};
  var shopMoneyFormat = "{{ shop.money_format }}";
</script>
<script src="https://cdn.jsdelivr.net/npm/url-parse@1.5.10/dist/url-parse.min.js"></script>
<script src="{{ 'Details.js' | asset_url }}"></script>
 

{% schema %}
{
  "name": "t:general.product",
  "settings": [],
  "disabled_on": {
    "groups": ["header", "footer"]
  }
}
{% endschema %}
